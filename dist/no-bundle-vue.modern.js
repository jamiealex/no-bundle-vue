import r from"rimraf";import e from"util";import o from"glob";import i from"path";import{rollup as t}from"rollup";import n from"rollup-plugin-vue";import{spawn as s}from"child_process";import l from"fs";var a=e.promisify(r);function u(r){return i.resolve(__dirname,r)}async function m(r,e,o){var i,s=await t({input:r,plugins:[{name:"HoistImportsPlugin",resolveId:e=>e===r||e.match(/\?rollup-plugin-vue=script.js$/)?null:{id:e,external:!0},transform(r,e){if(!e.match(/\?rollup-plugin-vue=script.js/)){var o=r;for(var t of i=[...f(r)])o=o.replace(t,"");return o}},intro:()=>i.map(r=>r.replace(".vue",".js")).join("\n")},n(),{name:"TransformImport",renderChunk:r=>r.replace(/vue-runtime-helpers\/(.*)\.mjs/g,"/web_modules/vue-runtime-helpers/$1.js")}],external:["vue"]}),l=r.replace(e,o).replace(/(vue)$/,"js");s.write({file:l,format:"esm"})}var p=/^\s*import\s(?!type(of\s|\s)(?!from)).*\sfrom\s['"](.*)['"].*$/gm;function*f(r){for(;;){var e=p.exec(r);if(null===e)break;yield e[0]}}export default async function(r){var{sourceDirectory:e,outputDirectory:t}=r,n=u(e),p=u(t);for(var f of(await async function(r){return a(r)}(p),o.sync(i.resolve(n,"./**/*.?(js|vue)"))))await m(f,n,p);await async function(r,e){var o=i.resolve(require.resolve("snowpack"),"../index.bin.js");await new Promise((t,n)=>{s("node",[o,"--include",i.resolve(e,"./**/*.js"),"--dest",i.resolve(e,"./web_modules")],{cwd:i.resolve(r,"../"),stdio:"inherit"}).on("exit",r=>{if(r>0)return n();t()})})}(n,p),await async function(r,e){return l.promises.copyFile(i.resolve(r,"./index.html"),i.resolve(e,"./index.html"))}(n,p)}
//# sourceMappingURL=no-bundle-vue.modern.js.map
